# ูุธุงู ุงูุชุนุฑู ุนูู ุงูููุญุงุช - ุฏููู ุดุงูู
# Plate Recognition System - Comprehensive Guide

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู ูุชูุงูู ููุชุนุฑู ุนูู ุงูููุญุงุช ุงููุฑูุฑูุฉ ูุชุชุจุน ุงููุฎุงููุงุช ุฅูู ุงููุดุฑูุน. ูุฐุง ุงููุธุงู ูุจูู ุนูู FastAPI ููุนูู ุจุดูู ูุณุชูู ุนู ูุธุงู Flask ุงูุฃุณุงุณู.

## ๐ฏ ุงููููุฒุงุช

### โจ ุงููููุฒุงุช ุงูุฃุณุงุณูุฉ
- ๐ **Webhook API** ูุงุณุชูุจุงู ุฃุญุฏุงุซ ุงูุชุนุฑู ุนูู ุงูููุญุงุช
- ๐ **ุชุชุจุน ุงููุฎุงููุงุช** ุชููุงุฆูุงู (ุงูุชูุฑุงุฑุ ุงูุฏุฎูู ุบูุฑ ุงููุตุฑุญ)
- ๐ค **ุชุตุฏูุฑ ุงูุจูุงูุงุช** ุจุตูุบ ูุชุนุฏุฏุฉ (Excel, PDF, HTML)
- ๐ฅ **ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช** ูู ูููุงุช Excel
- ๐ **ูุงุฌูุฉ ุนุฑุจูุฉ** ุงุญุชุฑุงููุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู
- โ๏ธ **ุฅุนุฏุงุฏุงุช ูุฑูุฉ** ุนุจุฑ ููู .env

### ๐ง ุงููููุฒุงุช ุงูุชูููุฉ
- FastAPI ููุฃุฏุงุก ุงูุนุงูู
- SQLAlchemy ORM ูุฅุฏุงุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- Pydantic ููุชุญูู ูู ุงูุจูุงูุงุช
- ุฏุนู SQLite ู PostgreSQL
- API ููุซูุฉ ุชููุงุฆูุงู (Swagger/ReDoc)
- ุงุฎุชุจุงุฑุงุช ุดุงููุฉ (11 ุงุฎุชุจุงุฑ)

## ๐ ูููู ุงููุดุฑูุน

```
517/
โโโ plate_recognition/           # ูุธุงู ุงูุชุนุฑู ุนูู ุงูููุญุงุช ุงูุฌุฏูุฏ
โ   โโโ __init__.py             # ุชููุฆุฉ ุงูุญุฒูุฉ
โ   โโโ main.py                 # ุชุทุจูู FastAPI ุงูุฑุฆูุณู
โ   โโโ models.py               # ููุงุฐุฌ SQLAlchemy
โ   โโโ schemas.py              # ูุฎุทุทุงุช Pydantic
โ   โโโ database.py             # ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ utils.py                # ููุทู ุงููุฎุงููุงุช
โ   โโโ .env                    # ููู ุงูุฅุนุฏุงุฏุงุช
โ   โโโ templates/
โ   โ   โโโ index.html          # ูุงุฌูุฉ ุนุฑุจูุฉ
โ   โโโ README.md               # ุชูุซูู ุงููุธุงู
โ   โโโ QUICKSTART.md           # ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน
โ
โโโ app.py                      # ุชุทุจูู Flask ุงูุฃุณุงุณู (ููุฌูุฏ ูุณุจูุงู)
โโโ database_api.py             # API ูุงุนุฏุฉ ุจูุงูุงุช Flask
โโโ test_plate_system.py        # ุงุฎุชุจุงุฑุงุช ูุธุงู ุงูููุญุงุช
โโโ run_plate_system.sh         # ุณูุฑูุจุช ุชุดุบูู ุงููุธุงู
โโโ PLATE_RECOGNITION_GUIDE.md  # ูุฐุง ุงูููู
```

## ๐ ุงูุชุดุบูู ุงูุณุฑูุน

### 1. ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
# ุชุซุจูุช ุฌููุน ุงูููุชุจุงุช
pip install -r requirements.txt
```

### 2. ุชุดุบูู ุงููุธุงู

```bash
# ุจุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช (ููุตู ุจู)
./run_plate_system.sh

# ุฃู ูุฏููุงู
cd plate_recognition
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

### 3. ุงููุตูู ูููุธุงู

- **ุงููุงุฌูุฉ ุงูุฑุฆูุณูุฉ:** http://localhost:8000
- **API ุงูุชูุซูู:** http://localhost:8000/docs
- **ูุญุต ุงูุตุญุฉ:** http://localhost:8000/health

## ๐ ุงุณุชุฎุฏุงู API

### 1. ุงุณุชูุจุงู ุญุฏุซ ุชุนุฑู (Webhook)

**POST** `/api/webhook/plate`

```json
{
  "plate": "ABC1234",
  "timestamp": "2025-01-18T10:30:00",
  "camera_id": "CAM-001",
  "confidence": 95.5,
  "image_url": "https://example.com/image.jpg",
  "vehicle": {
    "make": "Toyota",
    "color": "ุฃุจูุถ",
    "type": "ุณูุฏุงู"
  }
}
```

**ุงุณุชุฌุงุจุฉ ูุงุฌุญุฉ:**
```json
{
  "id": 1,
  "plate": "ABC1234",
  "timestamp": "2025-01-18T10:30:00",
  "camera_id": "CAM-001",
  "confidence": 95.5,
  "make": "Toyota",
  "color": "ุฃุจูุถ",
  "type": "ุณูุฏุงู"
}
```

### 2. ุงุณุชุนูุงู ุงูุฃุญุฏุงุซ

**GET** `/api/events?start=2025-01-01&end=2025-01-31&min_confidence=85&plate=ABC`

**ุงูููุงุชุฑ ุงููุชุงุญุฉ:**
- `start`: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ (ISO 8601)
- `end`: ุชุงุฑูุฎ ุงูููุงูุฉ
- `camera_id`: ูุนุฑู ุงููุงููุฑุง
- `plate`: ุฑูู ุงูููุญุฉ (ุจุญุซ ุฌุฒุฆู)
- `min_confidence`: ุงูุญุฏ ุงูุฃุฏูู ููุซูุฉ

### 3. ุงุณุชุนูุงู ุงููุฎุงููุงุช

**GET** `/api/violations`

**ุงุณุชุฌุงุจุฉ:**
```json
[
  {
    "id": 1,
    "plate": "ABC1234",
    "violation_type": "repeat",
    "start_time": "2025-01-18T08:00:00",
    "end_time": "2025-01-18T20:00:00",
    "count": 5,
    "status": "open",
    "notes": "ุธููุฑ >= 3 ูุฑุงุช ูู 24 ุณุงุนุฉ"
  }
]
```

### 4. ุชุตุฏูุฑ ุงูุจูุงูุงุช

**POST** `/api/export`

```json
{
  "format": "excel",
  "filter": {
    "start": "2025-01-01T00:00:00",
    "min_confidence": 80
  }
}
```

**ุงูุตูุบ ุงููุฏุนููุฉ:**
- `excel`: ููู .xlsx
- `pdf`: ุชูุฑูุฑ PDF
- `html`: ุฌุฏูู HTML

### 5. ุงุณุชูุฑุงุฏ ูู Excel

**POST** `/api/import/excel`

ุฑูุน ููู Excel ูุน ุงูุฃุนูุฏุฉ:
- ุงูููุญุฉ / Plate
- ุงูุชุงุฑูุฎ / Timestamp
- ุงููุงููุฑุง / Camera
- ุงูุซูุฉ / Confidence
- ุงูููุน / Type
- ุงูุดุฑูุฉ / Make
- ุงูููู / Color
- ุฑุงุจุท_ุงูุตูุฑุฉ / ImageURL

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช

ููู `.env` ูู ูุฌูุฏ `plate_recognition`:

```ini
# ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_URL=sqlite:///./plates.db

# ุงูุญุฏ ุงูุฃุฏูู ููุซูุฉ (%)
CONFIDENCE_MIN=80

# ุฅุนุฏุงุฏุงุช ุงูุชูุฑุงุฑ
REPEAT_THRESHOLD_COUNT=3      # ุนุฏุฏ ุงูุธููุฑ ูููุฎุงููุฉ
REPEAT_WINDOW_HOURS=24        # ุงููุชุฑุฉ ุงูุฒูููุฉ ุจุงูุณุงุนุงุช

# ุงูุณุงุนุงุช ุงููุณููุญุฉ
ALLOWED_START=06:00           # ููุช ุงูุจุฏุก
ALLOWED_END=22:00             # ููุช ุงูุงูุชูุงุก

# ุงูุชุตุฑูุญ ุงููุทููุจ
PERMIT_REQUIRED=false
```

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู

#### vehicles (ุงููุฑูุจุงุช)
```sql
CREATE TABLE vehicles (
    id INTEGER PRIMARY KEY,
    plate_number VARCHAR(32) UNIQUE NOT NULL,
    make VARCHAR(64),
    color VARCHAR(64),
    type VARCHAR(64)
);
```

#### cameras (ุงููุงููุฑุงุช)
```sql
CREATE TABLE cameras (
    id INTEGER PRIMARY KEY,
    camera_id VARCHAR(64) UNIQUE NOT NULL,
    location VARCHAR(128)
);
```

#### events (ุงูุฃุญุฏุงุซ)
```sql
CREATE TABLE events (
    id INTEGER PRIMARY KEY,
    vehicle_id INTEGER REFERENCES vehicles(id),
    camera_id INTEGER REFERENCES cameras(id),
    timestamp DATETIME NOT NULL,
    confidence FLOAT NOT NULL,
    image_url TEXT,
    make VARCHAR(64),
    color VARCHAR(64),
    type VARCHAR(64)
);
```

#### violations (ุงููุฎุงููุงุช)
```sql
CREATE TABLE violations (
    id INTEGER PRIMARY KEY,
    vehicle_id INTEGER REFERENCES vehicles(id),
    violation_type VARCHAR(64) NOT NULL,
    start_time DATETIME NOT NULL,
    end_time DATETIME,
    count INTEGER DEFAULT 0,
    status VARCHAR(32) DEFAULT 'open',
    notes TEXT
);
```

## ๐ ุฃููุงุน ุงููุฎุงููุงุช

### 1. ุงูุชูุฑุงุฑ (repeat)
- **ุงูุดุฑุท:** ุธููุฑ ุงููุฑูุจุฉ >= `REPEAT_THRESHOLD_COUNT` ูุฑุงุช
- **ุงููุชุฑุฉ:** ุฎูุงู `REPEAT_WINDOW_HOURS` ุณุงุนุฉ
- **ุงูุญุงูุฉ:** ุชููุชุญ ุชููุงุฆูุงู ูุชูุบูู ุนูุฏ ุงูุฎูุงุถ ุงูุนุฏุฏ

### 2. ุฏุฎูู ุบูุฑ ูุตุฑุญ (unauthorized_entry)
- **ุงูุดุฑุท:** ุฏุฎูู ุฎุงุฑุฌ ุงูุณุงุนุงุช ุงููุณููุญุฉ
- **ุงููุชุฑุฉ:** `ALLOWED_START` ุฅูู `ALLOWED_END`
- **ุงูุญุงูุฉ:** ุชูุณุฌู ููุฑุงู

## ๐งช ุงูุงุฎุชุจุงุฑุงุช

```bash
# ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
python -m pytest test_plate_system.py -v

# ุงุฎุชุจุงุฑ ูุญุฏุฏ
python -m pytest test_plate_system.py::test_webhook_plate_valid -v

# ูุน ุงูุชุบุทูุฉ
python -m pytest test_plate_system.py --cov=plate_recognition -v
```

**ุงููุชุงุฆุฌ:**
- โ 11 ุงุฎุชุจุงุฑ ูุงุฌุญ ูู ุฃุตู 11
- โ ุฌููุน endpoints ุชุนูู ุจุดูู ุตุญูุญ
- โ ุงูุชุญูู ูู ุงูุจูุงูุงุช ูุนูู
- โ ุงูุชุตุฏูุฑ ูุงูุงุณุชูุฑุงุฏ ูุนููุงู

## ๐ ุงููุงุฌูุฉ ุงูุนุฑุจูุฉ

ุงููุงุฌูุฉ ูุตููุฉ ุจุงููุงูู ุจุงูุนุฑุจูุฉ RTL ูุชุดูู:

### ๐ ูุณู ุงูุฃุญุฏุงุซ
- ุฌุฏูู ุชูุงุนูู ูุนุฑุถ ุงูุฃุญุฏุงุซ
- ููุชุฑุฉ ุญุณุจ ุงูุซูุฉ
- ุฃุฒุฑุงุฑ ุชุตุฏูุฑ (Excel, HTML, PDF)
- ุนุฑุถ ุงูุตูุฑ ุงููุฑุชุจุทุฉ

### โ๏ธ ูุณู ุงููุฎุงููุงุช
- ูุงุฆูุฉ ุงููุฎุงููุงุช ูุน ุงูุญุงูุฉ
- ุฃููุงู ูููุฒุฉ (ุฃุญูุฑ ููููุชูุญุ ุฃุฎุถุฑ ูููุบูู)
- ุชูุงุตูู ูู ูุฎุงููุฉ

### ๐ฅ ูุณู ุงูุงุณุชูุฑุงุฏ
- ุฑูุน ูููุงุช Excel
- ุฑุณุงุฆู ูุฌุงุญ/ูุดู ูุงุถุญุฉ
- ุชุญุฏูุซ ุชููุงุฆู ุจุนุฏ ุงูุงุณุชูุฑุงุฏ

### ๐ ุงูุฅุญุตุงุฆูุงุช
- ุนุฏุฏ ุงูุฃุญุฏุงุซ ุงูุฅุฌูุงูู
- ุนุฏุฏ ุงููุฎุงููุงุช
- ุงููุฎุงููุงุช ุงูููุชูุญุฉ

## ๐ ุงูุฃูุงู

### ุงูููุฒุงุช ุงูุฃูููุฉ
- โ ุงูุชุญูู ูู ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู Pydantic
- โ ุญูุงูุฉ ูู SQL Injection (SQLAlchemy ORM)
- โ ูุนุงูุฌุฉ ุขููุฉ ูููููุงุช
- โ HTTPS ููุตู ุจู ูู ุงูุฅูุชุงุฌ

### ุงูุชูุตูุงุช
- ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ
- ุฃุถู ูุตุงุฏูุฉ ููู API
- ุงุญูุธ `.env` ุฎุงุฑุฌ Git
- ุฑุงูุจ ุงูุณุฌูุงุช ุจุงูุชุธุงู

## ๐ ุงููุดุฑ

### ุงูุชุญููู ุฅูู PostgreSQL

```bash
# 1. ุชุซุจูุช ุงูููุชุจุฉ
pip install psycopg2-binary

# 2. ุชุญุฏูุซ .env
DATABASE_URL=postgresql+psycopg2://user:pass@host:5432/dbname

# 3. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
createdb plates_db

# 4. ุชุดุบูู ุงููุธุงู
uvicorn main:app --host 0.0.0.0 --port 8000
```

### ุงููุดุฑ ุนูู Railway

```bash
# 1. ุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ
# 2. ุฑุจุท GitHub repo
# 3. ุฅุถุงูุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
# 4. ุงููุดุฑ ุชููุงุฆู
```

### ุงููุดุฑ ุนูู Render

```yaml
# render.yaml
services:
  - type: web
    name: plate-recognition
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn plate_recognition.main:app --host 0.0.0.0 --port $PORT
```

## ๐ ุงูุฏุนู

### ุงููุซุงุฆู
- [README.md](plate_recognition/README.md) - ุงูุชูุซูู ุงููุงูู
- [QUICKSTART.md](plate_recognition/QUICKSTART.md) - ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน
- `/docs` - Swagger UI ุงูุชูุงุนูู
- `/redoc` - ReDoc ุงูุชูุซูู

### ุงููุณุงุนุฏุฉ
- ุงูุญุต ุงูุณุฌูุงุช ููุฃุฎุทุงุก
- ุฑุงุฌุน ุงูุงุฎุชุจุงุฑุงุช ููุฃูุซูุฉ
- ุงุณุชุฎุฏู `/health` ููุชุญูู ูู ุงูุญุงูุฉ

## ๐ฏ ุฎุทุท ูุณุชูุจููุฉ

### ูุญุชูู ููุฅุถุงูุฉ
- [ ] ูุตุงุฏูุฉ API (JWT)
- [ ] Websocket ููุชุญุฏูุซุงุช ุงูุญูุฉ
- [ ] ุชูุงุฑูุฑ ูุชูุฏูุฉ ุจุงูุฑุณูู ุงูุจูุงููุฉ
- [ ] ุฅุฏุงุฑุฉ ุงููุงููุฑุงุช ูู ุงููุงุฌูุฉ
- [ ] ุฅุดุนุงุฑุงุช ุนูุฏ ุญุฏูุซ ูุฎุงููุงุช
- [ ] ุชูุงูู ูุน ุฃูุธูุฉ ุฎุงุฑุฌูุฉ

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุธุงู ุฌุฒุก ูู ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅุณูุงู ุงูุฌุงูุนู ูุฌุงูุนุฉ ุงูุฅูุงู ูุญูุฏ ุจู ุณุนูุฏ ุงูุฅุณูุงููุฉ.

---

**ุชู ุงูุชุทููุฑ ุจูุฌุงุญ โ**

**Built with โค๏ธ by:**
- Ali5829511
- Manus AI

**HWGP - Housing Management System Project**
