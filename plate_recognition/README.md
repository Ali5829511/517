# ูุธุงู ุงูุชุนุฑู ุนูู ุงูููุญุงุช ูุชุชุจุน ุงููุฎุงููุงุช
# Plate Recognition and Violations Tracking System

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ | Overview

ูุธุงู ูุชูุงูู ููุชุนุฑู ุนูู ุงูููุญุงุช ุงููุฑูุฑูุฉ ูุชุชุจุน ุงููุฎุงููุงุช ุจุงุณุชุฎุฏุงู FastAPI ู SQLAlchemy ูุน ูุงุฌูุฉ ุนุฑุจูุฉ ูุชูุฏูุฉ.

**ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ:**
- ๐ ุงูุชุนุฑู ุงูุชููุงุฆู ุนูู ุงูููุญุงุช ุนุจุฑ Webhook
- ๐ ุชุชุจุน ุงููุฎุงููุงุช (ุงูุชูุฑุงุฑุ ุงูุฏุฎูู ุบูุฑ ุงููุตุฑุญ)
- ๐ค ุชุตุฏูุฑ ุงูุจูุงูุงุช (Excel, PDF, HTML)
- ๐ฅ ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ูู Excel
- ๐ ูุงุฌูุฉ ุนุฑุจูุฉ ุงุญุชุฑุงููุฉ
- โ๏ธ ุฅุนุฏุงุฏุงุช ูุงุจูุฉ ููุชุฎุตูุต

---

## ๐ ุงููุชุทูุจุงุช | Requirements

- Python 3.10+
- PostgreSQL ุฃู SQLite (ููุชุฌุฑุจุฉ ุงูุณุฑูุนุฉ)
- ููุชุจุงุช Python (ุงูุธุฑ requirements.txt)

### ุชุซุจูุช ุงูููุชุจุงุช | Install Dependencies

```bash
pip install fastapi uvicorn sqlalchemy pydantic python-dotenv pandas openpyxl jinja2 reportlab
```

ุฃู:

```bash
pip install -r requirements.txt
```

---

## ๐ ุงูุชุดุบูู ุงูุณุฑูุน | Quick Start

### 1. ุฅุนุฏุงุฏ ุงูุจูุฆุฉ | Environment Setup

ุงูุณุฎ ููู `.env` ููู ุจุชุนุฏูู ุงูุฅุนุฏุงุฏุงุช:

```bash
cd plate_recognition
cp .env .env.local
```

### 2. ุชุดุบูู ุงูุฎุงุฏู | Run Server

```bash
cd plate_recognition
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### 3. ูุชุญ ุงููุชุตูุญ | Open Browser

- **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:** http://localhost:8000
- **ุงูุชูุซูู ุงูุชูุงุนูู:** http://localhost:8000/docs
- **ุงูุชูุซูู ุงูุจุฏูู:** http://localhost:8000/redoc

---

## โ๏ธ ุงูุฅุนุฏุงุฏุงุช | Configuration

ุฌููุน ุงูุฅุนุฏุงุฏุงุช ูู ููู `.env`:

```ini
# ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_URL=sqlite:///./plates.db

# ุงูุญุฏ ุงูุฃุฏูู ููุซูุฉ (%)
CONFIDENCE_MIN=80

# ุฅุนุฏุงุฏุงุช ุงูุชูุฑุงุฑ
REPEAT_THRESHOLD_COUNT=3      # ุนุฏุฏ ุงูุชูุฑุงุฑ ูููุฎุงููุฉ
REPEAT_WINDOW_HOURS=24        # ูุชุฑุฉ ุงูุชูุฑุงุฑ ุจุงูุณุงุนุงุช

# ุงูุณุงุนุงุช ุงููุณููุญุฉ
ALLOWED_START=06:00
ALLOWED_END=22:00

# ุงูุชุตุฑูุญ ุงููุทููุจ
PERMIT_REQUIRED=false
```

---

## ๐ API Endpoints

### 1. ุงุณุชูุจุงู ุญุฏุซ ุชุนุฑู | Webhook

**POST** `/api/webhook/plate`

```json
{
  "plate": "ABC1234",
  "timestamp": "2025-01-18T10:30:00",
  "camera_id": "CAM-001",
  "confidence": 95.5,
  "image_url": "https://example.com/image.jpg",
  "vehicle": {
    "make": "Toyota",
    "color": "ุฃุจูุถ",
    "type": "ุณูุฏุงู"
  }
}
```

### 2. ุงุณุชุนูุงู ุงูุฃุญุฏุงุซ | Query Events

**GET** `/api/events?start=2025-01-01&plate=ABC1234&min_confidence=85`

### 3. ุงุณุชุนูุงู ุงููุฎุงููุงุช | Query Violations

**GET** `/api/violations`

### 4. ุชุตุฏูุฑ ุงูุจูุงูุงุช | Export Data

**POST** `/api/export`

```json
{
  "format": "excel",
  "filter": {
    "start": "2025-01-01T00:00:00",
    "end": "2025-01-31T23:59:59",
    "min_confidence": 80
  }
}
```

### 5. ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช | Import Data

**POST** `/api/import/excel`

ุฑูุน ููู Excel ูุญุชูู ุนูู ุงูุฃุนูุฏุฉ:
- ุงูููุญุฉ / Plate
- ุงูุชุงุฑูุฎ / Timestamp
- ุงููุงููุฑุง / Camera
- ุงูุซูุฉ / Confidence
- ุงูููุน / Type
- ุงูุดุฑูุฉ / Make
- ุงูููู / Color
- ุฑุงุจุท_ุงูุตูุฑุฉ / ImageURL

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช | Database Schema

### ุงูุฌุฏุงูู | Tables

#### vehicles (ุงููุฑูุจุงุช)
- `id`: ูุนุฑู ูุฑูุฏ
- `plate_number`: ุฑูู ุงูููุญุฉ (ูุฑูุฏ)
- `make`: ุงูุดุฑูุฉ ุงููุตูุนุฉ
- `color`: ุงูููู
- `type`: ุงูููุน

#### cameras (ุงููุงููุฑุงุช)
- `id`: ูุนุฑู ูุฑูุฏ
- `camera_id`: ูุนุฑู ุงููุงููุฑุง (ูุฑูุฏ)
- `location`: ุงููููุน

#### events (ุงูุฃุญุฏุงุซ)
- `id`: ูุนุฑู ูุฑูุฏ
- `vehicle_id`: ูุนุฑู ุงููุฑูุจุฉ
- `camera_id`: ูุนุฑู ุงููุงููุฑุง
- `timestamp`: ููุช ุงูุญุฏุซ
- `confidence`: ูุณุจุฉ ุงูุซูุฉ
- `image_url`: ุฑุงุจุท ุงูุตูุฑุฉ
- `make`, `color`, `type`: ุจูุงูุงุช ูุตููุฉ

#### violations (ุงููุฎุงููุงุช)
- `id`: ูุนุฑู ูุฑูุฏ
- `vehicle_id`: ูุนุฑู ุงููุฑูุจุฉ
- `violation_type`: ููุน ุงููุฎุงููุฉ
- `start_time`: ููุช ุงูุจุฏุงูุฉ
- `end_time`: ููุช ุงูููุงูุฉ
- `count`: ุนุฏุฏ ุงูุชูุฑุงุฑ
- `status`: ุงูุญุงูุฉ (open, reviewing, closed)
- `notes`: ููุงุญุธุงุช

---

## ๐ ุฃููุงุน ุงููุฎุงููุงุช | Violation Types

### 1. ุงูุชูุฑุงุฑ | Repeat Violation

ุชูุณุฌู ุนูุฏูุง ุชุธูุฑ ุงููุฑูุจุฉ ุฃูุซุฑ ูู `REPEAT_THRESHOLD_COUNT` ูุฑุงุช ุฎูุงู `REPEAT_WINDOW_HOURS` ุณุงุนุฉ.

### 2. ุฏุฎูู ุบูุฑ ูุตุฑุญ | Unauthorized Entry

ุชูุณุฌู ุนูุฏูุง ุชุฏุฎู ุงููุฑูุจุฉ ุฎุงุฑุฌ ุงูุณุงุนุงุช ุงููุณููุญุฉ (`ALLOWED_START` - `ALLOWED_END`).

---

## ๐ ุงูุชุตุฏูุฑ ูุงูุงุณุชูุฑุงุฏ | Export & Import

### ุชุตุฏูุฑ | Export

**ุฃููุงุน ุงูุชุตุฏูุฑ ุงููุชุงุญุฉ:**
- **Excel**: ููู `.xlsx` ูุน ูุงูุฉ ุงูุจูุงูุงุช
- **PDF**: ุชูุฑูุฑ ุจุตูุบุฉ PDF (ุญุชู 500 ุญุฏุซ)
- **HTML**: ุฌุฏูู HTML ูุงุจู ููุทุจุงุนุฉ

### ุงุณุชูุฑุงุฏ | Import

**ูุชุทูุจุงุช ููู Excel:**
- ุตูุบุฉ `.xlsx` ุฃู `.xls`
- ูุฌุจ ุฃู ูุญุชูู ุนูู ุงูุฃุนูุฏุฉ ุงููุทููุจุฉ
- ุงูุชูุงุฑูุฎ ุจุตูุบุฉ ุตุญูุญุฉ
- ุงูุซูุฉ (ุฃุฑูุงู ูู 0-100)

---

## ๐๏ธ ุงูุชุทููุฑ | Development

### ูููู ุงููุดุฑูุน | Project Structure

```
plate_recognition/
โโโ __init__.py           # ุชููุฆุฉ ุงูุญุฒูุฉ
โโโ main.py              # ุชุทุจูู FastAPI ุงูุฑุฆูุณู
โโโ models.py            # ููุงุฐุฌ SQLAlchemy
โโโ schemas.py           # ูุฎุทุทุงุช Pydantic
โโโ database.py          # ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ utils.py             # ููุทู ุงููุฎุงููุงุช ูุงูุฅุนุฏุงุฏุงุช
โโโ .env                 # ููู ุงูุฅุนุฏุงุฏุงุช
โโโ templates/
โ   โโโ index.html       # ูุงุฌูุฉ ุนุฑุจูุฉ
โโโ README.md            # ูุฐุง ุงูููู
```

### ุงูุชุญููู ุฅูู PostgreSQL | PostgreSQL Migration

```bash
# ุชุซุจูุช psycopg2
pip install psycopg2-binary

# ุชุญุฏูุซ DATABASE_URL ูู .env
DATABASE_URL=postgresql+psycopg2://user:password@localhost:5432/plates_db
```

---

## ๐ ุงูุฃูุงู | Security

- โ ุงูุชุญูู ูู ุงูุจูุงูุงุช ุจุงุณุชุฎุฏุงู Pydantic
- โ ุญูุงูุฉ ูู SQL Injection ุนุจุฑ SQLAlchemy ORM
- โ HTTPS ููุตู ุจู ูู ุงูุฅูุชุงุฌ
- โ๏ธ ูุง ุชุดุงุฑู ููู `.env` ุฃู ุชุถุนู ูู Git

---

## ๐ ููุงุญุธุงุช | Notes

### ูุงุนุฏุฉ ุงูุจูุงูุงุช | Database

- SQLite ููุงุณุจ ููุชุฌุฑุจุฉ ูุงูุชุทููุฑ
- PostgreSQL ููุตู ุจู ููุฅูุชุงุฌ
- ุงูุฌุฏุงูู ุชููุดุฃ ุชููุงุฆูุงู ุนูุฏ ุฃูู ุชุดุบูู

### ุงูุฃุฏุงุก | Performance

- ุงุณุชุฎุฏู ููุฑุณุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุงุณุชุนูุงูุงุช ุงูุณุฑูุนุฉ
- ุญุฏุฏ ุนุฏุฏ ุงูุณุฌูุงุช ุงููุณุชุฑุฌุนุฉ (pagination)
- ุงุณุชุฎุฏู cache ููุจูุงูุงุช ุงููุชูุฑุฑุฉ

### ุงูุชูุณุน | Scaling

- ุฃุถู ููุงุนุฏ ูุฎุงููุงุช ุฌุฏูุฏุฉ ูู `utils.py`
- ุฃุถู endpoints ุฌุฏูุฏุฉ ูู `main.py`
- ุฃุถู ุฌุฏุงูู ุฌุฏูุฏุฉ ูู `models.py`

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก | Troubleshooting

### ูุดููุฉ: ูุง ุชุธูุฑ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

```bash
# ุชุฃูุฏ ูู ูุฌูุฏ ูุฌูุฏ templates
ls plate_recognition/templates/index.html
```

### ูุดููุฉ: ุฎุทุฃ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุงุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฃุนุฏ ุฅูุดุงุฆูุง
rm plates.db
uvicorn main:app --reload
```

### ูุดููุฉ: ุฎุทุฃ ูู ุงูุงุณุชูุฑุงุฏ

```bash
# ุชุฃูุฏ ูู ุชุซุจูุช ูู ุงูููุชุจุงุช
pip install -r requirements.txt
```

---

## ๐ ุงูุฏุนู | Support

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุฑุงุฌุน:
- ุงูุชูุซูู ุงูุชูุงุนูู: http://localhost:8000/docs
- GitHub: https://github.com/Ali5829511/517

---

## ๐ ุงูุชุฑุฎูุต | License

ูุฐุง ุงููุดุฑูุน ุฌุฒุก ูู ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅุณูุงู ุงูุฌุงูุนู ูุฌุงูุนุฉ ุงูุฅูุงู ูุญูุฏ ุจู ุณุนูุฏ ุงูุฅุณูุงููุฉ.

**ุชู ุงูุชุทููุฑ ุจูุณุงุนุฏุฉ:**
- Manus AI
- Ali5829511

---

## โจ ุงููุณุงููุฉ | Contributing

ูุฑุญุจ ุจุงููุณุงููุงุช! ุงูุฑุฌุงุก:
1. Fork ุงููุดุฑูุน
2. ุฅูุดุงุก ูุฑุน ููููุฒุฉ ุงูุฌุฏูุฏุฉ
3. Commit ุงูุชุบููุฑุงุช
4. Push ูุฅูุดุงุก Pull Request

---

**Built with โค๏ธ for Imam Muhammad bin Saud Islamic University**
