# أمثلة تصنيف صور المواقف - Parking Classification Examples
# نظام إدارة الإسكان الجامعي

**التاريخ:** 2025-10-30  
**الميزة:** تصنيف الصور باستخدام الذكاء الاصطناعي

---

## 📋 نظرة عامة / Overview

نظام تصنيف الصور يستخدم الذكاء الاصطناعي المتقدم (GPT-4o) لتحليل الصور وتصنيفها تلقائياً إلى 8 فئات مختلفة بدقة عالية.

The image classification system uses advanced AI (GPT-4o) to automatically analyze and classify images into 8 different categories with high accuracy.

---

## 🎯 الفئات المتاحة / Available Categories

### 1. 🅿️ موقف عادي (Normal Parking)
**الخصائص البصرية:**
- خطوط بيضاء أو صفراء عادية
- لا توجد علامات خاصة
- موقف سيارات عام

**مثال الاستخدام:**
```
صورة موقف سيارات عادي → يتم التصنيف تلقائياً كـ "normal"
```

---

### 2. ♿ موقف معاقين (Disabled Parking) ⭐ **مثال مفصل**

**الخصائص البصرية المميزة:**
- ✅ **رمز الكرسي المتحرك** ♿ (العلامة الأساسية)
- ✅ **لون أزرق** مميز (عادةً أزرق فاتح أو داكن)
- ✅ **علامة معاقين واضحة** (نص أو رمز)
- ✅ **أوسع من المواقف العادية** (مساحة إضافية للكرسي المتحرك)
- ✅ **لافتة عمودية** تحمل رمز المعاقين (في بعض الحالات)

#### مثال تفصيلي لاستخراج صورة موقف معاقين:

**الخطوة 1: رفع الصورة**
```
1. افتح صفحة فرز الصور: /static/visual_parking_classifier.html
2. اضغط على "اختيار الصور" أو اسحب الصورة
3. يتم رفع صورة موقف المعاقين
```

**الخطوة 2: التحليل التلقائي**
```json
{
    "category": "disabled",
    "confidence": 95,
    "reason": "تم اكتشاف رمز الكرسي المتحرك ♿ بوضوح مع لون أزرق مميز. 
              الموقف يحتوي على علامة معاقين واضحة ومساحة أوسع من المواقف العادية."
}
```

**الخطوة 3: النتيجة**
- **التصنيف:** موقف معاقين (Disabled Parking) ♿
- **مستوى الثقة:** 95% (دقة عالية جداً)
- **السبب:** وجود رمز الكرسي المتحرك + اللون الأزرق + المساحة الواسعة

#### كيفية يتعرف النظام على موقف المعاقين:

**العناصر البصرية التي يبحث عنها النظام:**

1. **الرمز الدولي للمعاقين** ♿
   - شكل كرسي متحرك مع شخص
   - عادة باللون الأبيض على خلفية زرقاء

2. **الألوان المميزة**
   - أزرق فاتح (#4A90E2)
   - أزرق داكن (#1E5799)
   - خطوط بيضاء بارزة

3. **النصوص**
   - "معاقين" بالعربية
   - "Disabled" بالإنجليزية
   - "Handicapped"
   - "Reserved for Disabled"

4. **الأبعاد**
   - عرض الموقف: عادة 3.5-4 متر (أوسع من العادي)
   - طول الموقف: 5-6 متر

#### أمثلة على السيناريوهات المختلفة:

**السيناريو 1: رمز واضح جداً**
```
الصورة: موقف مع رمز كرسي متحرك كبير ♿ + خلفية زرقاء
النتيجة:
{
    "category": "disabled",
    "confidence": 98,
    "reason": "رمز الكرسي المتحرك واضح جداً مع لون أزرق مميز"
}
```

**السيناريو 2: علامة على الأرض**
```
الصورة: خطوط زرقاء على الأرض + رمز معاقين مرسوم
النتيجة:
{
    "category": "disabled",
    "confidence": 92,
    "reason": "رمز معاقين واضح على أرضية الموقف مع خطوط زرقاء"
}
```

**السيناريو 3: لافتة عمودية**
```
الصورة: لافتة معدنية تحمل رمز معاقين على عمود
النتيجة:
{
    "category": "disabled",
    "confidence": 90,
    "reason": "لافتة عمودية تحمل رمز المعاقين بوضوح"
}
```

**السيناريو 4: غير واضح**
```
الصورة: موقف مع رمز باهت أو مخفي جزئياً
النتيجة:
{
    "category": "disabled",
    "confidence": 65,
    "reason": "يوجد إشارة لموقف معاقين لكن الرمز غير واضح تماماً"
}
```

---

### 3. 🔒 موقف خاص (Private Parking)

**الخصائص البصرية:**
- لافتة "خاص" أو "Private"
- اسم شخص أو شركة محدد
- رقم محدد

**مثال:**
```json
{
    "category": "private",
    "confidence": 88,
    "reason": "يوجد لافتة تحمل نص 'خاص' واسم محدد"
}
```

---

### 4. 🏗️ موقف قبو (Basement Parking)

**الخصائص البصرية:**
- إضاءة صناعية واضحة
- أعمدة خرسانية
- سقف منخفض
- جدران خرسانية

**مثال:**
```json
{
    "category": "basement",
    "confidence": 93,
    "reason": "موقف سفلي مع إضاءة صناعية وأعمدة خرسانية وسقف منخفض"
}
```

---

### 5. 📄 ترخيص أو تصريح (License/Permit)

**الخصائص البصرية:**
- ورقة رسمية
- شعار جامعة أو جهة حكومية
- أختام رسمية

---

### 6. 📱 رمز QR (QR Code)

**الخصائص البصرية:**
- رمز QR واضح
- باركود ثنائي الأبعاد

---

### 7. 🔧 سيارات مكبوحة (Wheel Clamp) ⭐ **مثال مفصل**

**الخصائص البصرية المميزة:**
- ✅ **جهاز معدني أصفر أو أحمر** على العجلة
- ✅ **قفل أمني** على الإطار يمنع الحركة
- ✅ **لون أصفر فاقع** أو برتقالي (اللون الأكثر شيوعاً)
- ✅ **كتابة تحذيرية** "Wheel Clamp" أو "Boot" أو "مكبوح"
- ✅ **رقم تسلسلي** أو معلومات الجهة المسؤولة
- ✅ **سيارة معطلة** أو تحت المراقبة

#### مثال تفصيلي لاستخراج صورة سيارة مكبوحة:

**الخطوة 1: رفع الصورة**
```
1. افتح صفحة فرز الصور: /static/visual_parking_classifier.html
2. اضغط على "اختيار الصور"
3. يتم رفع صورة السيارة المكبوحة
```

**الخطوة 2: التحليل التلقائي**
```json
{
    "category": "wheel_clamp",
    "confidence": 94,
    "reason": "تم اكتشاف جهاز كبح معدني أصفر فاقع على عجلة السيارة. 
              الجهاز يحمل كتابة تحذيرية ورقم تسلسلي واضح."
}
```

**الخطوة 3: النتيجة**
- **التصنيف:** سيارة مكبوحة (Wheel Clamp) 🔧
- **مستوى الثقة:** 94% (دقة عالية جداً)
- **السبب:** وجود جهاز كبح معدني + اللون الأصفر المميز + كتابة تحذيرية

#### كيف يتعرف النظام على السيارة المكبوحة:

**العناصر البصرية التي يبحث عنها النظام:**

1. **جهاز الكبح المعدني**
   - شكل معدني ضخم على العجلة
   - يغطي جزء كبير من الإطار
   - تصميم أمني واضح

2. **الألوان المميزة**
   - أصفر فاقع (#FFD700)
   - برتقالي (#FF6600)
   - أحمر (#DC143C)
   - أحياناً مع خطوط سوداء

3. **النصوص والعلامات**
   - "Wheel Clamp" / "Boot"
   - "مكبوح" / "ممنوع التحرك"
   - "Police" / "شرطة"
   - رقم هاتف الجهة المسؤولة
   - رقم تسلسلي

4. **السياق**
   - السيارة متوقفة في مكان
   - لا يمكنها الحركة
   - قد يكون هناك ملصق إضافي على الزجاج

#### أمثلة على السيناريوهات المختلفة:

**السيناريو 1: كبح أمامي واضح**
```
الصورة: جهاز كبح أصفر كبير على العجلة الأمامية
النتيجة:
{
    "category": "wheel_clamp",
    "confidence": 96,
    "reason": "جهاز كبح أصفر فاقع واضح جداً على العجلة الأمامية مع كتابة تحذيرية"
}
```

**السيناريو 2: كبح من زاوية جانبية**
```
الصورة: جهاز كبح برتقالي على العجلة من الجانب
النتيجة:
{
    "category": "wheel_clamp",
    "confidence": 91,
    "reason": "جهاز كبح معدني برتقالي واضح على الإطار مع قفل أمني"
}
```

**السيناريو 3: كبح مع ملصق تحذيري**
```
الصورة: جهاز كبح + ملصق على زجاج السيارة
النتيجة:
{
    "category": "wheel_clamp",
    "confidence": 98,
    "reason": "جهاز كبح واضح مع ملصق تحذيري إضافي على الزجاج - مخالفة مؤكدة"
}
```

---

### 8. 🚫 مخالفة/الوقوف الممنوع (Violation) ⭐ **مثال مفصل**

**الخصائص البصرية المميزة:**
- ✅ **سيارة متوقفة في مكان ممنوع**
- ✅ **علامة "ممنوع الوقوف"** أو "No Parking"
- ✅ **خطوط صفراء مزدوجة** أو منطقة محظورة
- ✅ **سيارة تسد مخرج** أو طريق طوارئ
- ✅ **موقف على الرصيف** أو في مكان غير مخصص
- ✅ **لافتة تحذيرية** حمراء

#### مثال تفصيلي لاستخراج صورة وقوف ممنوع:

**الخطوة 1: رفع الصورة**
```
1. افتح صفحة فرز الصور: /static/visual_parking_classifier.html
2. اضغط على "اختيار الصور"
3. يتم رفع صورة الوقوف الممنوع/المخالفة
```

**الخطوة 2: التحليل التلقائي**
```json
{
    "category": "violation",
    "confidence": 92,
    "reason": "سيارة متوقفة في منطقة ممنوع الوقوف مع وجود لافتة تحذيرية واضحة 
              وخطوط صفراء مزدوجة على الأرض."
}
```

**الخطوة 3: النتيجة**
- **التصنيف:** مخالفة وقوف (Violation) 🚫
- **مستوى الثقة:** 92% (دقة عالية)
- **السبب:** سيارة في مكان ممنوع + لافتة تحذيرية + خطوط صفراء

#### كيف يتعرف النظام على مخالفة الوقوف:

**العناصر البصرية التي يبحث عنها النظام:**

1. **لافتات المنع**
   - علامة دائرية حمراء مع خط مائل
   - "ممنوع الوقوف" / "No Parking"
   - "P" داخل دائرة حمراء مع خط
   - "Tow Away Zone" (منطقة سحب السيارات)

2. **الخطوط الأرضية**
   - خطوط صفراء مزدوجة (Double Yellow Lines)
   - خطوط حمراء (في بعض البلدان)
   - منطقة مظللة بالأصفر والأسود
   - خطوط متقطعة صفراء

3. **السياق البصري**
   - سيارة تسد مدخل أو مخرج
   - موقف على الرصيف
   - أمام محل إطفاء (Hydrant)
   - في منطقة طوارئ
   - قريبة جداً من زاوية/تقاطع

4. **النصوص والعلامات**
   - "No Parking Anytime"
   - "Fire Lane" (ممر الإطفاء)
   - "Emergency Access Only"
   - "ممنوع الوقوف مطلقاً"
   - "منطقة طوارئ"

#### أمثلة على السيناريوهات المختلفة:

**السيناريو 1: وقوف أمام لافتة ممنوع**
```
الصورة: سيارة متوقفة مباشرة تحت لافتة "ممنوع الوقوف"
النتيجة:
{
    "category": "violation",
    "confidence": 97,
    "reason": "سيارة متوقفة مباشرة تحت لافتة ممنوع الوقوف واضحة - مخالفة صريحة"
}
```

**السيناريو 2: وقوف على خط أصفر مزدوج**
```
الصورة: سيارة على جانب الطريق فوق خطوط صفراء مزدوجة
النتيجة:
{
    "category": "violation",
    "confidence": 93,
    "reason": "سيارة متوقفة على خطوط صفراء مزدوجة - منطقة ممنوع الوقوف"
}
```

**السيناريو 3: سد مخرج أو باب**
```
الصورة: سيارة تسد مدخل مبنى أو جراج
النتيجة:
{
    "category": "violation",
    "confidence": 89,
    "reason": "سيارة تسد مدخل/مخرج - وقوف غير قانوني يعيق الحركة"
}
```

**السيناريو 4: وقوف في موقف معاقين (بدون تصريح)**
```
الصورة: سيارة عادية في موقف معاقين بدون لوحة تصريح
النتيجة:
{
    "category": "violation",
    "confidence": 95,
    "reason": "سيارة عادية متوقفة في موقف معاقين بدون تصريح واضح - مخالفة"
}
```

**السيناريو 5: وقوف على الرصيف**
```
الصورة: سيارة متوقفة جزئياً أو كلياً على الرصيف
النتيجة:
{
    "category": "violation",
    "confidence": 88,
    "reason": "سيارة متوقفة على الرصيف - يعيق حركة المشاة"
}
```

**السيناريو 6: وقوف في منطقة طوارئ**
```
الصورة: سيارة في منطقة بها علامة "Fire Lane" أو "Emergency"
النتيجة:
{
    "category": "violation",
    "confidence": 96,
    "reason": "سيارة في منطقة طوارئ/ممر إطفاء - مخالفة خطيرة"
}
```

#### الفرق بين المخالفة والسيارة المكبوحة:

| السيارة المكبوحة 🔧 | المخالفة 🚫 |
|---------------------|------------|
| جهاز كبح معدني على العجلة | لا يوجد جهاز كبح |
| لون أصفر/برتقالي بارز | لافتات حمراء أو خطوط صفراء |
| السيارة لا تستطيع الحركة | السيارة يمكنها الحركة |
| عقوبة تم تطبيقها بالفعل | مخالفة محتملة |

**ملاحظة مهمة:** بعض الصور قد تجمع بين الاثنين - سيارة مكبوحة بسبب مخالفة وقوف!

---

### 9. ❓ أخرى (Other)

**الخصائص:**
- لا تتطابق مع أي فئة أعلاه
- صورة غير واضحة

---

## 📸 أمثلة بصرية للتصنيفات المطلوبة / Visual Examples for Requested Classifications

### مثال 1: موقف خاص (Private Parking) 🔒

**الوصف:**
صورة موقف سيارات يحمل لافتة "خاص" أو "Reserved" مع اسم محدد.

**ما يجب أن تحتويه الصورة:**
```
- لافتة تحمل كلمة "خاص" أو "Private" أو "Reserved"
- اسم شخص أو شركة (مثل: "د. أحمد محمد" أو "شركة XYZ")
- رقم موقف محدد (مثل: "رقم 15" أو "المدير التنفيذي")
- قد يكون هناك سلسلة أو حاجز
```

**مثال للنتيجة المتوقعة:**
```json
{
    "category": "private",
    "confidence": 91,
    "reason": "موقف يحمل لافتة 'خاص' مع اسم محدد ورقم موقف - تخصيص واضح"
}
```

**صورة نموذجية:**
- لافتة معدنية أو بلاستيكية على حائط أو عمود
- خلفية بيضاء أو زرقاء أو خضراء
- نص واضح بالعربية أو الإنجليزية
- قد تحتوي على شعار الجهة

---

### مثال 2: رمز QR (QR Code) 📱

**الوصف:**
صورة تحتوي على رمز QR واضح (باركود ثنائي الأبعاد).

**ما يجب أن تحتويه الصورة:**
```
- رمز QR واضح (مربع أسود وأبيض)
- الثلاثة مربعات المميزة في الزوايا
- قد يكون على ورقة أو ملصق أو شاشة
- نص توضيحي (مثل: "امسح للدفع" أو "Scan to Pay")
```

**مثال للنتيجة المتوقعة:**
```json
{
    "category": "qr",
    "confidence": 96,
    "reason": "رمز QR واضح جداً مع المربعات الثلاثة المميزة في الزوايا"
}
```

**صورة نموذجية:**
- رمز QR في وسط الصورة
- خلفية بيضاء للوضوح
- حجم مناسب (على الأقل 200×200 بكسل في الصورة)
- بدون انعكاسات أو ظلال

---

### مثال 3: سيارة مكبوحة (Wheel Clamp) 🔧

**الوصف:**
صورة لسيارة عليها جهاز كبح معدني على العجلة.

**ما يجب أن تحتويه الصورة:**
```
- جهاز كبح معدني واضح على العجلة
- لون أصفر فاقع أو برتقالي أو أحمر
- كتابة على الجهاز (رقم تسلسلي أو تحذير)
- قفل أمني واضح
- السيارة متوقفة ولا تستطيع الحركة
```

**مثال للنتيجة المتوقعة:**
```json
{
    "category": "wheel_clamp",
    "confidence": 95,
    "reason": "جهاز كبح معدني أصفر فاقع واضح على العجلة الأمامية مع كتابة تحذيرية ورقم تسلسلي"
}
```

**صورة نموذجية:**
- زاوية جانبية أو أمامية تظهر العجلة بوضوح
- الجهاز يغطي جزء كبير من العجلة
- إضاءة جيدة تظهر اللون المميز
- قد تظهر أجزاء من السيارة حول العجلة

---

### مثال 4: الوقوف الممنوع/مخالفة (Violation) 🚫

**الوصف:**
صورة لسيارة متوقفة في مكان ممنوع الوقوف فيه.

**ما يجب أن تحتويه الصورة:**
```
- سيارة متوقفة في مكان محظور
- لافتة "ممنوع الوقوف" أو "No Parking" واضحة
- خطوط صفراء مزدوجة على الأرض
- علامة دائرية حمراء مع P مشطوب
- أو سيارة تسد مخرج/مدخل
```

**مثال للنتيجة المتوقعة:**
```json
{
    "category": "violation",
    "confidence": 93,
    "reason": "سيارة متوقفة مباشرة تحت لافتة 'ممنوع الوقوف' مع خطوط صفراء مزدوجة على الأرض - مخالفة واضحة"
}
```

**أنواع مخالفات الوقوف الشائعة:**
1. **وقوف تحت لافتة ممنوع:** الأوضح والأسهل للكشف
2. **وقوف على خط أصفر مزدوج:** خطوط واضحة على جانب الطريق
3. **وقوف على الرصيف:** السيارة جزئياً أو كلياً على الرصيف
4. **سد مخرج:** السيارة تمنع الوصول لباب أو جراج
5. **في موقف معاقين (بدون تصريح):** سيارة عادية في موقف أزرق
6. **في منطقة طوارئ:** علامة "Fire Lane" أو "Emergency"

**صورة نموذجية:**
- تظهر السيارة والعلامة التحذيرية معاً في إطار واحد
- الخطوط الأرضية واضحة (إن وجدت)
- زاوية تُظهر السياق (أين متوقفة السيارة)
- إضاءة جيدة

---

## 🔧 كيفية الاستخدام / How to Use

### الطريقة 1: عبر الواجهة الويب

```
1. افتح: https://your-domain.com/visual_parking_classifier.html
2. اضغط "اختيار الصور"
3. اختر صورة واحدة أو عدة صور
4. انتظر التصنيف التلقائي (ثواني قليلة)
5. شاهد النتائج مع مستوى الثقة والسبب
```

### الطريقة 2: عبر API

**استدعاء API:**
```bash
curl -X POST https://your-domain.com/api/classify_parking \
  -F "image=@parking_image.jpg"
```

**الاستجابة:**
```json
{
    "success": true,
    "category": "disabled",
    "confidence": 95,
    "reason": "تم اكتشاف رمز الكرسي المتحرك بوضوح مع لون أزرق مميز",
    "details": {
        "category": "disabled",
        "confidence": 95,
        "reason": "رمز الكرسي المتحرك واضح جداً..."
    }
}
```

---

## 📊 معايير الدقة / Accuracy Criteria

### مستويات الثقة:

| المدى | التصنيف | الوصف |
|------|---------|--------|
| 85-100 | ✅ دقة عالية جداً | الصورة واضحة والتصنيف مؤكد |
| 60-84 | ⚠️ دقة متوسطة | محتمل لكن به بعض الشك |
| 0-59 | ❌ دقة منخفضة | الصورة غير واضحة أو التصنيف غير مؤكد |

---

## 💡 نصائح للحصول على أفضل دقة / Tips for Best Accuracy

### لتصنيف مواقف المعاقين بدقة عالية:

1. ✅ **التقط صورة واضحة** للموقف مع الرمز ظاهر
2. ✅ **اضمن إضاءة جيدة** - تجنب الصور الداكنة
3. ✅ **اجعل الرمز في المركز** - لا تقطع الصورة
4. ✅ **استخدم كاميرا عالية الدقة** - تجنب الصور المهتزة
5. ✅ **تأكد من ظهور اللون الأزرق** - إن وجد

### الصور التي تحقق أفضل نتائج:

- ✅ صورة مباشرة للموقف من الأمام
- ✅ رمز الكرسي المتحرك واضح وكامل
- ✅ إضاءة طبيعية أو صناعية جيدة
- ✅ دقة الصورة 800×600 أو أعلى
- ✅ تنسيق JPG أو PNG

### تجنب:

- ❌ صور بزوايا غريبة
- ❌ صور مقطوعة أو غير مكتملة
- ❌ صور داكنة جداً أو ساطعة جداً
- ❌ صور مهتزة أو غير واضحة
- ❌ صور بدقة منخفضة (<400×300)

---

## 🎓 أمثلة عملية من الواقع / Real-World Examples

### مثال 1: موقف معاقين في مركز تجاري

```
الوصف: موقف في مركز تجاري مع رمز معاقين كبير
النتيجة المتوقعة:
{
    "category": "disabled",
    "confidence": 97,
    "reason": "رمز كرسي متحرك واضح جداً مع لون أزرق ساطع ولافتة 'معاقين'"
}
```

### مثال 2: موقف معاقين في جامعة

```
الوصف: موقف في حرم جامعي مع خطوط زرقاء ورمز
النتيجة المتوقعة:
{
    "category": "disabled",
    "confidence": 94,
    "reason": "خطوط زرقاء على الأرض + رمز معاقين مرسوم بوضوح"
}
```

### مثال 3: موقف معاقين في مستشفى

```
الوصف: موقف قريب من المدخل مع لافتة عمودية
النتيجة المتوقعة:
{
    "category": "disabled",
    "confidence": 96,
    "reason": "لافتة عمودية كبيرة تحمل رمز المعاقين + موقع قريب من المدخل"
}
```

---

## 🔬 التقنية المستخدمة / Technology Used

**النموذج:** GPT-4o (أحدث وأدق نموذج من OpenAI)

**المميزات:**
- تحليل بصري متقدم للصور
- تعرف على الأشكال والألوان والنصوص
- فهم السياق البصري
- دقة عالية في التصنيف (>90% للصور الواضحة)

**معايير التحليل:**
1. الألوان (Color Analysis)
2. الأشكال (Shape Detection)
3. النصوص (Text Recognition - OCR)
4. الرموز (Symbol Detection)
5. السياق (Context Understanding)

---

## 📞 الدعم / Support

إذا كانت لديك أسئلة حول تصنيف الصور أو النتائج:

1. تحقق من مستوى الثقة (Confidence) - إذا كان منخفضاً، قد تحتاج لصورة أوضح
2. راجع السبب (Reason) - يوضح لماذا تم هذا التصنيف
3. جرب صورة بإضاءة أفضل أو زاوية مختلفة
4. تأكد من أن الصورة واضحة وبدقة جيدة

---

## 🎯 الخلاصة / Summary

نظام تصنيف الصور يستخدم الذكاء الاصطناعي المتقدم لتحليل وتصنيف صور المواقف بدقة عالية. لمواقف المعاقين، يبحث النظام عن:

1. ♿ رمز الكرسي المتحرك
2. 🔵 اللون الأزرق المميز
3. 📏 المساحة الأوسع
4. 📝 النصوص والعلامات

**للحصول على أفضل النتائج:** استخدم صور واضحة وعالية الدقة مع إضاءة جيدة.

---

**جامعة الإمام محمد بن سعود الإسلامية**  
**نظام إدارة الإسكان الجامعي**  
**تم التحديث:** 2025-10-30
