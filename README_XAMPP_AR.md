# دليل تشغيل نظام إدارة الإسكان على XAMPP

<div dir="rtl">

## 🎯 نظرة عامة

مرحباً بك في دليل تشغيل **نظام إدارة الإسكان الجامعي** على خادم XAMPP المحلي.

هذا الدليل مصمم خصيصاً للمستخدمين العرب ويوفر تعليمات خطوة بخطوة لتثبيت وتشغيل النظام على جهازك المحلي.

---

## 📋 ما هو XAMPP؟

**XAMPP** هو حزمة برمجية مجانية تحتوي على:
- **Apache** - خادم ويب
- **MySQL** - قاعدة بيانات (غير مطلوبة لهذا المشروع)
- **PHP** - لغة برمجة (غير مطلوبة لهذا المشروع)
- **Perl** - لغة برمجة (غير مطلوبة لهذا المشروع)

نستخدم XAMPP في هذا المشروع للاستفادة من خادم Apache فقط.

---

## 🚀 التثبيت السريع (10 دقائق)

### الخطوة 1️⃣: تحميل وتثبيت XAMPP

1. اذهب إلى: https://www.apachefriends.org/download.html
2. حمّل إصدار XAMPP لنظام التشغيل الخاص بك:
   - **Windows**: حمّل النسخة لويندوز
   - **Linux**: حمّل النسخة للينكس
   - **macOS**: حمّل النسخة لماك

3. شغّل برنامج التثبيت:
   - **Windows**: انقر مرتين على الملف المحمل
   - **Linux**: `sudo chmod +x xampp-installer.run && sudo ./xampp-installer.run`

4. اتبع خطوات المعالج:
   - اختر المكونات (Apache كافي)
   - اختر مسار التثبيت (الافتراضي موصى به):
     - Windows: `C:\xampp`
     - Linux: `/opt/lampp`

---

### الخطوة 2️⃣: تثبيت Python

نظامنا مبني على لغة Python، لذا نحتاج لتثبيتها:

1. اذهب إلى: https://www.python.org/downloads/
2. حمّل Python 3.11 أو أحدث
3. شغّل برنامج التثبيت:
   - ✅ **مهم جداً**: حدد خيار "Add Python to PATH"
   - اختر "Install Now"

4. تحقق من التثبيت:
   ```bash
   python --version
   ```
   يجب أن ترى: `Python 3.11.x` أو أحدث

---

### الخطوة 3️⃣: تحضير المشروع

1. **نسخ ملفات المشروع**:
   
   انسخ مجلد المشروع الكامل إلى:
   - **Windows**: `C:\xampp\htdocs\housing-system`
   - **Linux**: `/opt/lampp/htdocs/housing-system`

2. **تثبيت المكتبات المطلوبة**:
   
   افتح Command Prompt (Windows) أو Terminal (Linux):
   
   ```bash
   # انتقل إلى مجلد المشروع
   cd C:\xampp\htdocs\housing-system
   
   # ثبّت المكتبات
   pip install -r requirements.txt
   ```

3. **إعداد ملف البيئة (.env)**:
   
   أنشئ ملف جديد اسمه `.env` في مجلد المشروع واكتب فيه:
   
   ```env
   OPENAI_API_KEY=your-api-key-here
   FLASK_ENV=production
   SECRET_KEY=change-this-to-random-string
   DATABASE_PATH=housing_database.db
   HOST=127.0.0.1
   PORT=5000
   ```

   **ملاحظة**: 
   - احصل على `OPENAI_API_KEY` من: https://platform.openai.com/api-keys
   - غيّر `SECRET_KEY` إلى نص عشوائي طويل

---

### الخطوة 4️⃣: اختبار التثبيت

قبل التشغيل، دعنا نتأكد أن كل شيء جاهز:

```bash
python test_xampp_setup.py
```

هذا السكريبت سيختبر:
- ✅ إصدار Python
- ✅ المكتبات المطلوبة
- ✅ ملفات المشروع
- ✅ قاعدة البيانات
- ✅ توفر المنفذ 5000

---

### الخطوة 5️⃣: تشغيل النظام

الآن جاهز للتشغيل! لديك خياران:

#### الخيار أ: التشغيل المباشر (الأسهل) ✨

**على Windows**:
```bash
# انقر نقراً مزدوجاً على:
start_flask_windows.bat
```

**على Linux**:
```bash
./start_flask_linux.sh
```

#### الخيار ب: التشغيل اليدوي

```bash
cd C:\xampp\htdocs\housing-system
python app.py
```

---

### الخطوة 6️⃣: الوصول إلى النظام

1. افتح متصفح الإنترنت (Chrome أو Firefox)
2. اذهب إلى: **http://127.0.0.1:5000**
3. ستظهر لك الصفحة الرئيسية للنظام! 🎉

**بيانات تسجيل الدخول**:
- اسم المستخدم: `admin`
- كلمة المرور: `Admin@2025`

---

## 🔧 الإعداد المتقدم (اختياري)

### استخدام Apache كخادم عكسي

إذا أردت استخدام Apache لإدارة الطلبات:

#### 1. تفعيل وحدات Apache

افتح ملف: `C:\xampp\apache\conf\httpd.conf`

ابحث عن السطور التالية وتأكد أنها غير معلّقة (احذف # من البداية):

```apache
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule rewrite_module modules/mod_rewrite.so
LoadModule headers_module modules/mod_headers.so
```

#### 2. إضافة Virtual Host

أضف في نهاية ملف `httpd.conf`:

```apache
<VirtualHost *:80>
    ServerName housing.local
    ProxyPass / http://127.0.0.1:5000/
    ProxyPassReverse / http://127.0.0.1:5000/
</VirtualHost>
```

#### 3. تحديث ملف hosts

افتح ملف: `C:\Windows\System32\drivers\etc\hosts`

أضف:
```
127.0.0.1    housing.local
```

#### 4. إعادة تشغيل Apache

من XAMPP Control Panel:
1. اضغط "Stop" على Apache
2. اضغط "Start" على Apache

الآن يمكنك الوصول إلى: **http://housing.local**

---

## 🎓 دليل الاستخدام السريع

### الصفحة الرئيسية

بعد تسجيل الدخول، ستجد:
- **إحصائيات النظام**: عدد السكان، المباني، الوحدات
- **القوائم الرئيسية**: الوصول لجميع أقسام النظام

### الأقسام الرئيسية

1. **إدارة السكان**
   - عرض قائمة السكان (1,057 ساكن)
   - إضافة ساكن جديد
   - تعديل بيانات الساكن
   - البحث عن ساكن

2. **إدارة المباني**
   - عرض المباني (165 مبنى)
   - إضافة مبنى جديد
   - تفاصيل كل مبنى

3. **الوحدات السكنية**
   - عرض الوحدات (1,134 وحدة)
   - حالة الوحدات (مشغولة/فارغة)
   - إسناد وحدة لساكن

4. **ملصقات السيارات**
   - إدارة الملصقات (2,381 ملصق)
   - إصدار ملصق جديد
   - البحث بلوحة السيارة

5. **استخراج اللوحات بالذكاء الاصطناعي**
   - رفع صورة لوحة سيارة
   - استخراج النص تلقائياً
   - حفظ في قاعدة البيانات

6. **التقارير**
   - تقارير شاملة
   - رسوم بيانية
   - طباعة وتصدير PDF

---

## 🐛 حل المشاكل الشائعة

### مشكلة: "Python is not recognized"

**السبب**: Python غير مضاف إلى PATH

**الحل**:
1. افتح "Environment Variables" في ويندوز
2. أضف مسار Python إلى PATH
3. أعد فتح Command Prompt

### مشكلة: "Port 5000 is already in use"

**السبب**: برنامج آخر يستخدم المنفذ 5000

**الحل 1**: أغلق البرنامج الآخر

**الحل 2**: غيّر المنفذ في ملف `.env`:
```env
PORT=8000
```

### مشكلة: "Module not found"

**السبب**: مكتبة مطلوبة غير مثبتة

**الحل**:
```bash
pip install -r requirements.txt
```

### مشكلة: Apache لا يعمل

**السبب**: Skype أو برنامج آخر يستخدم المنفذ 80

**الحل**:
1. أغلق Skype
2. أو غيّر منفذ Apache في XAMPP Config

### مشكلة: لا تظهر البيانات

**السبب**: ملف قاعدة البيانات مفقود أو تالف

**الحل**:
```bash
python generate_database.py
```

---

## 📊 الإحصائيات والبيانات

النظام يحتوي على قاعدة بيانات كاملة:

| العنصر | العدد |
|--------|-------|
| المباني | 165 |
| الوحدات السكنية | 1,134 |
| السكان | 1,057 |
| ملصقات السيارات | 2,381 |
| المواقف | 1,308 |

---

## 🔐 الأمان والخصوصية

⚠️ **تحذيرات مهمة**:

1. **لا تشارك ملف `.env`** مع أي شخص - يحتوي على مفاتيح سرية
2. **غيّر كلمة المرور الافتراضية** للمدير فوراً
3. **احفظ نسخة احتياطية** من قاعدة البيانات بانتظام
4. **في الإنتاج**: استخدم HTTPS وغيّر جميع المفاتيح السرية

### نسخ احتياطي لقاعدة البيانات

```bash
# نسخ ملف قاعدة البيانات
copy housing_database.db housing_database_backup_2025-11-01.db
```

---

## 🌟 الميزات المتقدمة

### 1. الذكاء الاصطناعي (OpenAI)

يستخدم النظام OpenAI GPT-4 Vision لـ:
- استخراج أرقام اللوحات من الصور
- التعرف على النصوص العربية
- تحليل الصور

**ملاحظة**: هذه الميزة اختيارية وتحتاج API Key

### 2. التقارير التفاعلية

- 8 أنواع من الرسوم البيانية
- إحصائيات شاملة
- طباعة PDF
- تصدير Excel

### 3. البحث المتقدم

- البحث في جميع الحقول
- فلترة النتائج
- ترتيب البيانات

---

## 📱 الوصول من أجهزة أخرى

### 1. اعرف عنوان IP جهازك

**Windows**:
```bash
ipconfig
```
ابحث عن "IPv4 Address" (مثال: 192.168.1.100)

**Linux**:
```bash
ip addr show
```

### 2. غيّر إعدادات الـ HOST

في ملف `.env`:
```env
HOST=0.0.0.0
```

### 3. افتح الجدار الناري

**Windows**: Windows Defender Firewall → Allow an app → Python

**Linux**:
```bash
sudo ufw allow 5000
```

### 4. الوصول من جهاز آخر

من أي جهاز في نفس الشبكة:
```
http://192.168.1.100:5000
```
(استبدل 192.168.1.100 بعنوان IP جهازك)

---

## 🎯 استخدامات مقترحة

### للتطوير والاختبار
✅ اختبار النظام قبل النشر  
✅ تطوير ميزات جديدة  
✅ تدريب المستخدمين  

### للاستخدام المحلي
✅ شبكة داخلية في الجامعة  
✅ استخدام شخصي  
✅ عروض تقديمية  

### للتعليم
✅ تدريس تطوير الويب  
✅ مشاريع الطلاب  
✅ ورش العمل  

---

## 📚 المراجع والمصادر

### الوثائق
- [XAMPP_DEPLOYMENT.md](XAMPP_DEPLOYMENT.md) - دليل شامل مفصل
- [XAMPP_QUICK_START.md](XAMPP_QUICK_START.md) - دليل سريع
- [XAMPP_SETUP_CHECKLIST.md](XAMPP_SETUP_CHECKLIST.md) - قائمة التحقق

### سكريبتات التشغيل
- `start_flask_windows.bat` - لويندوز (Flask)
- `start_flask_linux.sh` - للينكس (Flask)
- `start_gunicorn_windows.bat` - لويندوز (Gunicorn)
- `start_gunicorn_linux.sh` - للينكس (Gunicorn)

### ملفات التكوين
- `apache_vhost_config.conf` - تكوين Apache
- `housing.wsgi` - ملف WSGI
- `.htaccess` - إعدادات Apache
- `housing-flask.service` - خدمة Systemd

### أدوات الاختبار
- `test_xampp_setup.py` - اختبار شامل للإعداد

---

## 🆘 الدعم الفني

إذا واجهت أي مشكلة:

1. **راجع قسم حل المشاكل** في هذا الملف
2. **اختبر الإعداد**: `python test_xampp_setup.py`
3. **تحقق من السجلات**:
   - `logs/housing-error.log`
   - `logs/gunicorn-error.log`
4. **راجع الوثائق الأخرى** في المشروع

---

## 🎓 معلومات المشروع

**النظام**: نظام إدارة الإسكان الجامعي  
**المؤسسة**: جامعة الإمام محمد بن سعود الإسلامية  
**التقنيات**: Flask, Python, SQLite, OpenAI  
**الإصدار**: 1.0  
**الترخيص**: للاستخدام الداخلي  

---

## 🌟 شكر وتقدير

تم تطوير هذا النظام باستخدام:
- **Flask** - إطار عمل Python
- **OpenAI** - الذكاء الاصطناعي
- **SQLite** - قاعدة البيانات
- **Apache** - خادم الويب
- **GitHub Copilot** - مساعدة في التطوير

---

## ✨ الخطوات التالية

بعد التثبيت الناجح:

1. ✅ **غيّر كلمة المرور** الافتراضية
2. ✅ **أنشئ نسخة احتياطية** من قاعدة البيانات
3. ✅ **اختبر جميع الميزات** للتأكد من عملها
4. ✅ **وثّق أي مشاكل** تواجهها
5. ✅ **شارك النظام** مع زملائك

---

## 🎉 تهانينا!

أنت الآن جاهز لاستخدام **نظام إدارة الإسكان الجامعي** على XAMPP!

استمتع بالنظام وبالتوفيق! 🚀

---

© 2025 جامعة الإمام محمد بن سعود الإسلامية  
تم إنشاء هذا الدليل بواسطة GitHub Copilot

</div>
