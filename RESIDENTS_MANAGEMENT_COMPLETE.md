# โ ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงู ุงููุชูุงูู - ุงูุชูู ุงูุชูููุฐ

## ๐ ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅููุงู ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงู ุจุดูู ูุงูู ูู ูุธุงู ุงูุฅุณูุงู ุงูุฌุงูุนูุ ูุน ุฌููุน ุนูููุงุช CRUD (ุฅูุดุงุกุ ูุฑุงุกุฉุ ุชุญุฏูุซุ ุญุฐู) ูุงูููุฒุงุช ุงููุชูุฏูุฉ.

---

## ๐ฏ ุงููุธุงุฆู ุงูููุฌุฒุฉ

### 1๏ธโฃ ูุธุงุฆู ูุงุนุฏุฉ ุงูุจูุงูุงุช (database_api.py)

#### โ `add_resident(resident_data)`
- ุฅุถุงูุฉ ุณุงูู ุฌุฏูุฏ ุฅูู ุงููุธุงู
- ุชุญุฏูุซ ุญุงูุฉ ุงููุญุฏุฉ ุชููุงุฆูุงู ุฅูู "ูุดุบูู"
- ุงูุชุญูู ูู ุนุฏู ุชูุฑุงุฑ ุงูุฑูู ุงููุทูู

**ุงููุนุงููุงุช:**
```python
{
    'name': str,              # ุงุณู ุงูุณุงูู
    'national_id': str,       # ุงูุฑูู ุงููุทูู (ูุฑูุฏ)
    'phone': str,             # ุฑูู ุงููุงุชู
    'email': str,             # ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
    'unit_id': int,           # ูุนุฑู ุงููุญุฏุฉ
    'move_in_date': str,      # ุชุงุฑูุฎ ุงูุฏุฎูู
    'status': str             # ุงูุญุงูุฉ (ุงูุชุฑุงุถู: "ูุดุท")
}
```

#### โ `update_resident(resident_id, resident_data)`
- ุชุญุฏูุซ ูุนูููุงุช ุณุงูู ููุฌูุฏ
- ุฅุฏุงุฑุฉ ุชููุงุฆูุฉ ูุชุบููุฑ ุงููุญุฏุงุช (ุชุญุฑูุฑ ุงููุฏููุฉุ ุญุฌุฒ ุงูุฌุฏูุฏุฉ)
- ูุง ูููู ุชุญุฏูุซ ุงูุฑูู ุงููุทูู

**ุงููุนุงููุงุช:**
```python
resident_id: int          # ูุนุฑู ุงูุณุงูู
resident_data: {
    'name': str,
    'phone': str,
    'email': str,
    'unit_id': int,
    'status': str
}
```

#### โ `checkout_resident(resident_id, checkout_data=None)`
- ุฅุฎุฑุงุฌ/ุณุญุจ ุณุงูู ูู ุงููุธุงู
- ุชุญุฏูุซ ุญุงูุฉ ุงูุณุงูู ุฅูู "ูุบุงุฏุฑ"
- ุชุญุฑูุฑ ุงููุญุฏุฉ (ุญุงูุฉ "ุดุงุบุฑ")
- ุฅูุบุงุก ุฌููุน ููุตูุงุช ุงูุณูุงุฑุงุช ุงููุฑุชุจุทุฉ (ุญุงูุฉ "ููุบู")

**ุงููุนุงููุงุช:**
```python
resident_id: int          # ูุนุฑู ุงูุณุงูู
checkout_data: dict       # ุจูุงูุงุช ุงุฎุชูุงุฑูุฉ (ููุงุญุธุงุชุ ุชุงุฑูุฎ ุงููุบุงุฏุฑุฉุ ุฅูุฎ)
```

#### โ `delete_resident(resident_id)`
- ุญุฐู ุณุงูู ููุงุฆูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุญุฑูุฑ ุงููุญุฏุฉ ุงููุฑุชุจุทุฉ
- โ๏ธ ุชุญุฐูุฑ: ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก

**ุงููุนุงููุงุช:**
```python
resident_id: int          # ูุนุฑู ุงูุณุงูู
```

#### โ `get_available_units(building_id=None)`
- ุงูุญุตูู ุนูู ูุงุฆูุฉ ุงููุญุฏุงุช ุงูุดุงุบุฑุฉ
- ููุชุฑุฉ ุงุฎุชูุงุฑูุฉ ุญุณุจ ุงููุจูู

**ุงููุนุงููุงุช:**
```python
building_id: int (optional)  # ูุนุฑู ุงููุจูู ููููุชุฑุฉ
```

---

### 2๏ธโฃ ููุงุท ุงูููุงูุฉ API (app.py)

#### โ `POST /api/residents`
**ุงููุตู:** ุฅุถุงูุฉ ุณุงูู ุฌุฏูุฏ  
**ุงูุตูุงุญูุงุช:** ูุฏูุฑ ููุท (@admin_required)  
**ุงูุงุณุชุฌุงุจุฉ:** 201 Created ุนูุฏ ุงููุฌุงุญ

```bash
curl -X POST http://localhost:5000/api/residents \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ูุญูุฏ ุฃุญูุฏ",
    "national_id": "1234567890",
    "phone": "0501234567",
    "email": "mohammed@example.com",
    "unit_id": 123,
    "move_in_date": "2025-10-29",
    "status": "ูุดุท"
  }'
```

#### โ `GET /api/residents`
**ุงููุตู:** ุงูุญุตูู ุนูู ุฌููุน ุงูุณูุงู  
**ุงูุตูุงุญูุงุช:** ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู  
**ุงูุงุณุชุฌุงุจุฉ:** ูุงุฆูุฉ ุจุฌููุน ุงูุณูุงู

#### โ `PUT /api/residents/:id`
**ุงููุตู:** ุชุญุฏูุซ ูุนูููุงุช ุณุงูู  
**ุงูุตูุงุญูุงุช:** ูุฏูุฑ ููุท (@admin_required)  
**ุงูุงุณุชุฌุงุจุฉ:** 200 OK ุนูุฏ ุงููุฌุงุญ

```bash
curl -X PUT http://localhost:5000/api/residents/1058 \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ูุญูุฏ ุฃุญูุฏ ุงููุญุฏุซ",
    "phone": "0509876543",
    "email": "new@example.com",
    "unit_id": 456,
    "status": "ูุดุท"
  }'
```

#### โ `POST /api/residents/:id/checkout`
**ุงููุตู:** ุฅุฎุฑุงุฌ/ุณุญุจ ุณุงูู ูู ุงููุธุงู  
**ุงูุตูุงุญูุงุช:** ูุฏูุฑ ููุท (@admin_required)  
**ุงูุงุณุชุฌุงุจุฉ:** 200 OK ุนูุฏ ุงููุฌุงุญ

```bash
curl -X POST http://localhost:5000/api/residents/1058/checkout
```

#### โ `DELETE /api/residents/:id`
**ุงููุตู:** ุญุฐู ุณุงูู ููุงุฆูุงู  
**ุงูุตูุงุญูุงุช:** ูุฏูุฑ ููุท (@admin_required)  
**ุงูุงุณุชุฌุงุจุฉ:** 200 OK ุนูุฏ ุงููุฌุงุญ

```bash
curl -X DELETE http://localhost:5000/api/residents/1058
```

#### โ `GET /api/units/available`
**ุงููุตู:** ุงูุญุตูู ุนูู ุงููุญุฏุงุช ุงูุดุงุบุฑุฉ  
**ุงูุตูุงุญูุงุช:** ูุณุชุฎุฏู ูุณุฌู ุฏุฎูู  
**ุงููุนุงููุงุช:** `building_id` (ุงุฎุชูุงุฑู)

```bash
curl http://localhost:5000/api/units/available?building_id=5
```

---

### 3๏ธโฃ ุงูุงุฎุชุจุงุฑุงุช (test_resident_management.py)

#### โ ุงุฎุชุจุงุฑ ุฏูุฑุฉ ุงูุญูุงุฉ ุงููุงููุฉ
```python
def test_resident_lifecycle():
    # 1. ุงูุญุตูู ุนูู ุงููุญุฏุงุช ุงูุดุงุบุฑุฉ
    # 2. ุฅุถุงูุฉ ุณุงูู ุฌุฏูุฏ
    # 3. ุชุญุฏูุซ ูุนูููุงุช ุงูุณุงูู
    # 4. ุฅุฎุฑุงุฌ ุงูุณุงูู
    # 5. ุญุฐู ุงูุณุงูู
```

**ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช:**
```bash
python test_resident_management.py
```

**ุงููุชุงุฆุฌ:**
```
โ ุชู ุงูุนุซูุฑ ุนูู 75 ูุญุฏุฉ ุดุงุบุฑุฉ
โ ุชู ุฅุถุงูุฉ ุงูุณุงูู ุจูุฌุงุญ (ID: 1060)
โ ุชู ุชุญุฏูุซ ูุนูููุงุช ุงูุณุงูู ุจูุฌุงุญ
โ ุชู ุฅุฎุฑุงุฌ ุงูุณุงูู ุจูุฌุงุญ
โ ุชู ุญุฐู ุงูุณุงูู ุจูุฌุงุญ
==================================================
โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุชูุช ุจูุฌุงุญ!
==================================================
```

---

### 4๏ธโฃ ุงูุชูุซูู

#### โ `API_RESIDENTS.md`
- ุฏููู ูุงูู ูุฌููุน ููุงุท ุงูููุงูุฉ
- ุฃูุซูุฉ ุนูู ุงูุงุณุชุฎุฏุงู (curl)
- ุดุฑุญ ุฑููุฒ ุงูุญุงูุฉ HTTP
- ูุนูููุงุช ุงูุฃูุงู ูุงูุตูุงุญูุงุช
- ุฃูุซูุฉ ุนูู ุงูุฑุฏูุฏ JSON

---

## ๐ ุงูุฃูุงู

### ุงูุตูุงุญูุงุช
- **ุงููุฑุงุกุฉ (GET):** ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุท
- **ุงููุชุงุจุฉ (POST, PUT, DELETE):** ุชุชุทูุจ ุตูุงุญูุงุช ุงููุฏูุฑ (@admin_required)

### ุงูุชุญูู ูู ุงูุจูุงูุงุช
- โ ุงูุฑูู ุงููุทูู ูุฑูุฏ (ูุง ูููู ุชูุฑุงุฑู)
- โ ุงูุชุญูู ูู ูุฌูุฏ ุงูุณุงูู ูุจู ุงูุชุญุฏูุซ/ุงูุญุฐู
- โ ุงูุชุญูู ูู ูุฌูุฏ ุงููุญุฏุฉ ูุจู ุงูุชุฎุตูุต
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุฅุฑุฌุงุน ุฑุณุงุฆู ูุงุถุญุฉ

---

## ๐ ูุฎุทุท ุชุฏูู ุงูุนูููุงุช

### ุฅุถุงูุฉ ุณุงูู
```
ุงููุณุชุฎุฏู (ูุฏูุฑ) โ POST /api/residents
    โ
ุงูุชุญูู ูู ุงูุจูุงูุงุช
    โ
ุงูุชุญูู ูู ุนุฏู ุชูุฑุงุฑ ุงูุฑูู ุงููุทูู
    โ
ุฅุถุงูุฉ ุงูุณุงูู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    โ
ุชุญุฏูุซ ุญุงูุฉ ุงููุญุฏุฉ ุฅูู "ูุดุบูู"
    โ
ุฅุฑุฌุงุน ID ุงูุณุงูู ุงูุฌุฏูุฏ
```

### ุฅุฎุฑุงุฌ ุณุงูู
```
ุงููุณุชุฎุฏู (ูุฏูุฑ) โ POST /api/residents/:id/checkout
    โ
ุงูุชุญูู ูู ูุฌูุฏ ุงูุณุงูู
    โ
ุชุญุฏูุซ ุญุงูุฉ ุงูุณุงูู ุฅูู "ูุบุงุฏุฑ"
    โ
ุชุญุฑูุฑ ุงููุญุฏุฉ (ุญุงูุฉ "ุดุงุบุฑ")
    โ
ุฅูุบุงุก ุฌููุน ุงูููุตูุงุช ุงููุฑุชุจุทุฉ
    โ
ุฅุฑุฌุงุน ุฑุณุงูุฉ ูุฌุงุญ
```

---

## ๐จ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. ุงูุฅุฏุงุฑุฉ ุงูุชููุงุฆูุฉ ูููุญุฏุงุช
- ุนูุฏ ุฅุถุงูุฉ ุณุงูู: ุงููุญุฏุฉ โ "ูุดุบูู"
- ุนูุฏ ุชุญุฏูุซ ุงููุญุฏุฉ: ุงููุฏููุฉ โ "ุดุงุบุฑ" + ุงูุฌุฏูุฏุฉ โ "ูุดุบูู"
- ุนูุฏ ุฅุฎุฑุงุฌ/ุญุฐู: ุงููุญุฏุฉ โ "ุดุงุบุฑ"

### 2. ุฅุฏุงุฑุฉ ุงูููุตูุงุช
- ุนูุฏ ุฅุฎุฑุงุฌ ุณุงูู: ุฌููุน ุงูููุตูุงุช โ "ููุบู"

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- ุฑููุฒ ุญุงูุฉ HTTP ููุงุณุจุฉ
- ูุนุงูุฌุฉ ุญุงูุงุช ุงูุงุณุชุซูุงุกุงุช

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุดุบูู ุงูุฎุงุฏู
```bash
python app.py
```

### 2. ุชุณุฌูู ุงูุฏุฎูู
- ุงูุงูุชูุงู ุฅูู: `http://localhost:5000/login.html`
- ุงุณู ุงููุณุชุฎุฏู: `admin`
- ูููุฉ ุงููุฑูุฑ: `Admin@2025`

### 3. ุงุณุชุฎุฏุงู API
ุงุณุชุฎุฏู ุฃู ุฃุฏุงุฉ HTTP (curl, Postman, ุฃู ูุงุฌูุฉ ูุณุชุฎุฏู) ููุชูุงุนู ูุน API.

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

| ุงููููุงุณ | ุงููููุฉ |
|---------|--------|
| ุนุฏุฏ ุงููุธุงุฆู ุงููุถุงูุฉ | 5 |
| ุนุฏุฏ ููุงุท ุงูููุงูุฉ API | 6 |
| ุนุฏุฏ ุงูุงุฎุชุจุงุฑุงุช | 5 |
| ูุณุจุฉ ูุฌุงุญ ุงูุงุฎุชุจุงุฑุงุช | 100% |
| ุนุฏุฏ ุงูุฃุณุทุฑ ุงูุจุฑูุฌูุฉ | ~450 |
| ุนุฏุฏ ูููุงุช ุงูุชูุซูู | 2 |

---

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [x] ุฅุถุงูุฉ ูุธููุฉ ุฅุถุงูุฉ ุณุงูู
- [x] ุฅุถุงูุฉ ูุธููุฉ ุชุญุฏูุซ ุณุงูู
- [x] ุฅุถุงูุฉ ูุธููุฉ ุฅุฎุฑุงุฌ ุณุงูู
- [x] ุฅุถุงูุฉ ูุธููุฉ ุญุฐู ุณุงูู
- [x] ุฅุถุงูุฉ ูุธููุฉ ุงููุญุฏุงุช ุงูุดุงุบุฑุฉ
- [x] ุฅุถุงูุฉ ููุงุท ููุงูุฉ API
- [x] ุญูุงูุฉ ุจุตูุงุญูุงุช ุงููุฏูุฑ
- [x] ุงุฎุชุจุงุฑ ุฌููุน ุงููุธุงุฆู
- [x] ุชูุซูู ูุงูู
- [x] ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- [x] ุงูุฅุฏุงุฑุฉ ุงูุชููุงุฆูุฉ ูููุญุฏุงุช
- [x] ุฅูุบุงุก ุงูููุตูุงุช ุนูุฏ ุงูุฅุฎุฑุงุฌ

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุชู ุฅููุงู **ูุธุงู ุฅุฏุงุฑุฉ ุงูุณูุงู ุงููุชูุงูู** ุจูุฌุงุญ! ุงููุธุงู ุงูุขู ูููุฑ:

โ **ุฏูุฑุฉ ุญูุงุฉ ูุงููุฉ** ููุณูุงู ูู ุงูุฏุฎูู ุฅูู ุงููุบุงุฏุฑุฉ  
โ **ุฅุฏุงุฑุฉ ุชููุงุฆูุฉ** ูููุญุฏุงุช ูุงูููุตูุงุช  
โ **ุฃูุงู ูุญูู** ุจุตูุงุญูุงุช ุงููุฏูุฑ  
โ **ุงุฎุชุจุงุฑุงุช ุดุงููุฉ** ุจูุณุจุฉ ูุฌุงุญ 100%  
โ **ุชูุซูู ููุตู** ุจุงูุนุฑุจูุฉ  

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู! ๐

---

## ๐ ููุฏุนู ูุงูุงุณุชูุณุงุฑุงุช
ุฑุงุฌุน ููู `API_RESIDENTS.md` ููุญุตูู ุนูู ุชูุงุตูู ุฅุถุงููุฉ ุญูู ุงุณุชุฎุฏุงู API.
